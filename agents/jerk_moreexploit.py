#!/usr/bin/env python3.6

import gym_remote.exceptions as gre
from utils import *
import jerk


class JERK_MoreExploit(jerk.JERK):
  def play(self):
    self.old_exploit_bias = self.exploit_bias
    while True:
      self.env.reset()
      if self.do_exploit():
        self.exploit()
      else:
        self.explore()

      if self.env.episode_reward >= 9000:
        eprint("Episode reward {} >= 9000 -- ALWAYS EXPLOIT!".format(self.env.episode_reward))
        self.exploit_bias = 1
      else:
        eprint("Episode reward {} < 9000 -- use exploit_prob!".format(self.env.episode_reward))
        self.exploit_bias = self.old_exploit_bias


if __name__ == '__main__':
  try:
    JERK_MoreExploit.main(JERK_MoreExploit)
  except gre.GymRemoteError as e:
    print('exception', e)
