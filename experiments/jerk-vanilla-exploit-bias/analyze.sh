#!/bin/sh

JOBS=1

parallel --jobs $JOBS <<EOF
merge_monitors.py 00-results/results*/monitor.csv > 00-results/total.csv
merge_monitors.py 10-results/results*/monitor.csv > 10-results/total.csv
merge_monitors.py 20-results/results*/monitor.csv > 20-results/total.csv
merge_monitors.py 30-results/results*/monitor.csv > 30-results/total.csv
merge_monitors.py 40-results/results*/monitor.csv > 40-results/total.csv
merge_monitors.py 50-results/results*/monitor.csv > 50-results/total.csv
merge_monitors.py 60-results/results*/monitor.csv > 60-results/total.csv
merge_monitors.py 70-results/results*/monitor.csv > 70-results/total.csv
merge_monitors.py 80-results/results*/monitor.csv > 80-results/total.csv
merge_monitors.py 90-results/results*/monitor.csv > 90-results/total.csv
EOF

# Kind of unsafe. We should not compare_monitors if any merges fail,
# but idk how to '&&' after a heredoc

compare_monitors.py . "Vanilla Jerk | Sonic The Hedgehog - Green Hill Zone - Act 1 | Exploit Bias" \
  "00% Bias" 00-results/total.csv  "10% Bias" 10-results/total.csv  "20% Bias" 20-results/total.csv \
  "30% Bias" 30-results/total.csv  "40% Bias" 40-results/total.csv  "50% Bias" 50-results/total.csv \
  "60% Bias" 60-results/total.csv  "70% Bias" 70-results/total.csv  "80% Bias" 80-results/total.csv \
	"90% Bias" 90-results/total.csv
